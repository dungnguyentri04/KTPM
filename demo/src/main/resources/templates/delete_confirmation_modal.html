<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Confirmation Modal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light p-4">
    <!-- Nút xóa (thay thế cho icon X đỏ trong bảng) -->
    <button type="button" class="btn btn-link text-danger p-0" data-bs-toggle="modal" data-bs-target="#deleteModal" data-user-name="testUser1">
        <i class="fas fa-times fs-5"></i>
    </button>

    <!-- Ví dụ sử dụng trong bảng -->
    <div class="mt-4">
        <h5>Ví dụ sử dụng trong bảng:</h5>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Tên</th>
                    <th>Số điện thoại</th>
                    <th>Vai trò</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>testUser1</td>
                    <td>0912345678</td>
                    <td>ACCOUNTANT</td>
                    <td>
                        <button type="button" class="btn btn-link text-primary p-0 me-2">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button type="button" class="btn btn-link text-danger p-0" data-bs-toggle="modal" data-bs-target="#deleteModal" data-user-name="testUser1" data-user-id="1">
                            <i class="fas fa-times"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>testUser3</td>
                    <td>0912345756</td>
                    <td>MANAGER</td>
                    <td>
                        <button type="button" class="btn btn-link text-primary p-0 me-2">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button type="button" class="btn btn-link text-danger p-0" data-bs-toggle="modal" data-bs-target="#deleteModal" data-user-name="testUser3" data-user-id="2">
                            <i class="fas fa-times"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Modal xác nhận xóa -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pt-0">
                    <div class="mb-3">
                        <i class="fas fa-exclamation-triangle text-warning" style="font-size: 3rem;"></i>
                    </div>
                    <h5 class="modal-title mb-3" id="deleteModalLabel">Xác nhận xóa</h5>
                    <p class="mb-0">Bạn có chắc chắn muốn xóa người dùng <strong id="userNameToDelete">testUser1</strong> không?</p>
                    <p class="text-muted small">Hành động này không thể hoàn tác.</p>
                </div>
                <div class="modal-footer border-0 justify-content-center">
                    <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-danger px-4" id="confirmDeleteBtn">Xóa</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // JavaScript để xử lý modal xác nhận xóa
        document.addEventListener('DOMContentLoaded', function() {
            const deleteModal = document.getElementById('deleteModal');
            const userNameElement = document.getElementById('userNameToDelete');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
            let currentUserId = null;

            // Khi modal được mở
            deleteModal.addEventListener('show.bs.modal', function(event) {
                const button = event.relatedTarget; // Nút đã kích hoạt modal
                const userName = button.getAttribute('data-user-name');
                const userId = button.getAttribute('data-user-id');
                
                // Cập nhật tên người dùng trong modal
                userNameElement.textContent = userName;
                currentUserId = userId;
            });

            // Xử lý khi nhấn nút "Xóa"
            confirmDeleteBtn.addEventListener('click', function() {
                if (currentUserId) {
                    // Thực hiện xóa - có thể gọi API hoặc xử lý logic xóa ở đây
                    console.log('Đang xóa người dùng có ID:', currentUserId);
                    
                    // Ví dụ: Gọi API xóa
                    deleteUser(currentUserId);
                    
                    // Đóng modal
                    const modalInstance = bootstrap.Modal.getInstance(deleteModal);
                    modalInstance.hide();
                }
            });

            // Hàm xóa người dùng (ví dụ)
            function deleteUser(userId) {
                // Ở đây bạn có thể gọi API để xóa người dùng
                // fetch('/api/users/' + userId, { method: 'DELETE' })
                //     .then(response => response.json())
                //     .then(data => {
                //         // Xử lý phản hồi
                //         location.reload(); // Tải lại trang hoặc cập nhật bảng
                //     });
                
                // Hiện tại chỉ hiển thị thông báo
                alert('Đã xóa người dùng có ID: ' + userId);
            }
        });
    </script>
</body>
</html>